import { forceGet } from "@lincode/utils";
const cache = new WeakMap();
const processed = new WeakSet();
export default (defaults) => {
    if (processed.has(defaults))
        return defaults;
    return forceGet(cache, defaults, () => {
        const result = Object.fromEntries(Object.entries(defaults).map(([key, value]) => [
            key,
            Array.isArray(value) ? value[0] : value
        ]));
        processed.add(result);
        return result;
    });
};
