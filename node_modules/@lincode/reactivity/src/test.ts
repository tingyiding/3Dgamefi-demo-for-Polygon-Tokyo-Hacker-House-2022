import store, { createEffect, createNestedEffect } from "."

const [setNumber, getNumber] = store(1)
const [setBoolean, getBoolean] = store(true)

const handle = createEffect(() => {
    console.log("overall")

    createNestedEffect(() => {
        console.log(getNumber())
        return () => {
            console.log("number clean")
        }
    }, [getNumber])

    createNestedEffect(() => {
        console.log(getBoolean())
        return () => {
            console.log("boolean clean")
        }
    }, [getBoolean])

    return () => {
        console.log("overall clean")
    }

}, [getNumber, getBoolean])

const global = window as any
global.handle = handle
global.setNumber = setNumber
global.setBoolean = setBoolean