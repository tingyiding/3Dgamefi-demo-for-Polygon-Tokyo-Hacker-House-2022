import "tailwindcss/base.css"
import "tailwindcss/components.css"
import "tailwindcss/utilities.css"
import React, { useEffect, useLayoutEffect, useRef, useState } from "react"
import { createRoot } from "react-dom/client"
import "./useDebounceEffect"
import { Disposable } from "@lincode/promiselikes"
import { useMemoOnce } from "."
import ReactDOM from "react-dom"

let count = 0

const Comp = () => {
    const numApp = useMemoOnce(() => {
        const result = ++count

        console.log("create", result)

        return result

    }, val => console.log("cleanup", val))

    return <div>hello world</div>
}

const App = () => {
    const [render, setRender] = useState(true)

    useEffect(() => {
        setTimeout(() => {
            setRender(!render)
        }, 1000)
    }, [render])

    return (
        render && <Comp />
    )
}

const root = createRoot(document.getElementById('app'));
root.render(<React.StrictMode><App /></React.StrictMode>);

// ReactDOM.render(<React.StrictMode><App /></React.StrictMode>, document.querySelector("#app"))